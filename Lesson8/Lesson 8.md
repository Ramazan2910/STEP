# Тема урока: 
- Хранимые процедуры
- Пользовательские функции

## Хранимые процедуры

Хранимые процедуры - это набор инструкций SQL,
которые могут быть вызваны одним запросом. 
Хранимые процедуры обычно используются для выполнения повторяющихся операций,
таких как вставка, обновление и удаление данных из базы данных.

Синтаксис и использование хранимых процедур:

```sql

CREATE PROCEDURE find_even_numbers
AS
SELECT * FROM numbers WHERE number % 2 = 0

```

Запускаются хранимые процедуры с помощью ключевого слова `EXECUTE` или `EXEC`:

```sql

EXECUTE find_even_numbers

```

или же 

```sql

EXEC find_even_numbers

```

## Пользовательские функции

Пользовательские функции - это набор инструкций SQL,
которые могут быть вызваны одним запросом.

Синтаксис и использование пользовательских функций:

```sql

CREATE FUNCTION function_name
RETURNS data_type
AS
BEGIN
    sql_statement
    RETURN value
END

```

Теперь давайте поговорим о различиях. 

1. Пользовательские функции обязательно должны возвращать значение, которое 
может быть как обычным типом данных, так и таблицей.
2. Хранимые процедуры могут возвращать значения, но это не обязательно.
3. Хранимые процедуры могут принимать output параметры, пользовательские функции - нет.
`output` - это параметр, который передается в процедуру и в который записывается результат выполнения процедуры.

Вот пример output параметра:

```sql

CREATE PROCEDURE get_even_numbers
@even_numbers INT OUTPUT
AS
SELECT @even_numbers = COUNT(*) FROM numbers WHERE number % 2 = 0

```
и в последствии вызывается так:

```sql

DECLARE @even_numbers INT
EXEC get_even_numbers @even_numbers OUTPUT

```

Вот полная таблица с различиями:

![](https://miro.medium.com/v2/resize:fit:1400/1*NOpSTadhrlvGUFa1rVhlBA.png)

